<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>VK Poller test</title>
</head>
<body>
	<header> vk.com/pikabu poller </header>
	<div id="posts"></div>

	<script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.2.min.js"></script>
	<script>
		var FB_ROOT = new Firebase('https://scrapyard.firebaseio.com/');

		$(function(){
			FB_ROOT.on("child_added", function(snapshot) {
						var $newDiv = $('<div></div>')
														.addClass('post-text')
														.attr('id', snapshot.key());

						var snapVal = snapshot.val();
						var post = snapVal.response[1];

						var postText = post.text;
						var postDate = parseDate( post.date );

						$newDiv.html('at <time>' + postDate + '</time><br>' + postText + '<hr>').appendTo('#posts');


					});
		});
		
		function parseDate(unixtime){
				var date = new Date(unixtime*1000);
		/*		// Hours part from the timestamp
				var hours = date.getHours();
				// Minutes part from the timestamp
				var minutes = "0" + date.getMinutes();
				// Seconds part from the timestamp
				var seconds = "0" + date.getSeconds();

				// Will display time in 10:30:23 format

				var formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);
*/
				return date.toLocaleString();
		}
	</script>
</body>
</html>